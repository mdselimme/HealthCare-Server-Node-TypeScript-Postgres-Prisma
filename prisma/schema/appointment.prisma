model Appointment {
  id             String            @id @default(uuid())
  patientId      String
  patient       Patient           @relation(fields: [patientId], references: [id])

  doctorId       String
  doctors        Doctor            @relation(fields: [doctorId], references: [id])

  scheduleId     String
  schedules      Schedule          @relation(fields: [scheduleId], references: [id])
  
  videoCallingId String
  status         AppointmentStatus @default(SCHEDULED)
  paymentStatus  PaymentStatus     @default(UNPAID)
  createdAt      DateTime          @default(now())
  updatedAt      DateTime
  doctorSchedules DoctorSchedules?
  payment        Payment?
  prescriptions  Prescriptions?
  review         Review?
}


model Payment {
  id                 String        @id @default(uuid())
  appointmentId      String        @unique
  amount             Float
  transactionId      String        @unique
  status             PaymentStatus @default(UNPAID)
  paymentGatewayData Json?
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  appointment        appointments  @relation(fields: [appointmentId], references: [id])

  @@map("payments")
}

model Review {
  id            String       @id @default(uuid())
  patientId     String
  doctorId      String
  appointmentId String       @unique
  rating        Int
  comment       String?
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  appointment   appointments @relation(fields: [appointmentId], references: [id])
  doctor        Doctor       @relation(fields: [doctorId], references: [id])
  patient       Patient      @relation(fields: [patientId], references: [id])

  @@map("reviews")
}
